// BIND9 Configuration File

// Access Control List for internal networks
acl internal {
    192.168.0.0/16;
    172.16.0.0/12;
    10.0.0.0/8;
    localhost;
    localnets;
};

options {
    directory "/var/cache/bind";

    // Listen on all interfaces
    listen-on { any; };
    listen-on-v6 { any; };

    // Allow queries from internal networks only
    allow-query { internal; };

    // Forwarding to Cloudflare DNS
    forwarders {
        1.1.1.1;
        1.0.0.1;
    };

    // Enable recursion for internal clients only
    recursion yes;
    allow-recursion { internal; };

    // DNSSEC validation
    dnssec-validation auto;

    // Query logging (disable in production)
    querylog no;
};

// Local zone for apps.local domain
zone "apps.local" {
    type master;
    file "/var/lib/bind/db.apps.local";
    allow-update { none; };
};

// Reverse lookup zone for 192.168.1.x
zone "1.168.192.in-addr.arpa" {
    type master;
    file "/var/lib/bind/db.192.168.1";
    allow-update { none; };
};
