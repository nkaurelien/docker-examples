# Mosquitto MQTT Broker Configuration
# https://mosquitto.org/man/mosquitto-conf-5.html

# =============================================================================
# General Settings
# =============================================================================

# Store persistent data
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information

# =============================================================================
# Listeners
# =============================================================================

# MQTT listener (default port)
listener 1883

# WebSocket listener (for browser-based clients)
listener 9001
protocol websockets

# =============================================================================
# Security
# =============================================================================

# Allow anonymous connections (set to false in production)
allow_anonymous true

# For authenticated access, uncomment and create password file:
# allow_anonymous false
# password_file /mosquitto/config/passwd

# To create password file:
# docker exec mosquitto mosquitto_passwd -c /mosquitto/config/passwd username

# =============================================================================
# Connection Settings
# =============================================================================

# Maximum connections (0 = unlimited)
max_connections -1

# Keep alive interval
max_keepalive 65535

# Message size limit (256MB)
message_size_limit 268435456
