# cert-manager Helm Values
# https://github.com/cert-manager/cert-manager/blob/master/deploy/charts/cert-manager/values.yaml

# Install CRDs with Helm
installCRDs: true

# Number of replicas
replicaCount: 1

# Strategy for deployment
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

# Image configuration
image:
  repository: quay.io/jetstack/cert-manager-controller
  pullPolicy: IfNotPresent

# Service account
serviceAccount:
  create: true
  automountServiceAccountToken: true

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# Container security context
containerSecurityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# Resources
resources:
  requests:
    cpu: 10m
    memory: 32Mi
  limits:
    cpu: 100m
    memory: 128Mi

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Prometheus metrics
prometheus:
  enabled: true
  servicemonitor:
    enabled: false
    prometheusInstance: default
    interval: 60s
    scrapeTimeout: 30s
    labels: {}

# Webhook configuration
webhook:
  replicaCount: 1
  timeoutSeconds: 30

  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true

  # Network policy
  networkPolicy:
    enabled: false
    ingress:
      - from:
          - ipBlock:
              cidr: 0.0.0.0/0
    egress:
      - ports:
          - port: 80
            protocol: TCP
          - port: 443
            protocol: TCP
          - port: 53
            protocol: TCP
          - port: 53
            protocol: UDP
        to:
          - ipBlock:
              cidr: 0.0.0.0/0

# CA Injector
cainjector:
  enabled: true
  replicaCount: 1

  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true

# ACME HTTP01 solver image
acmesolver:
  image:
    repository: quay.io/jetstack/cert-manager-acmesolver

# Startup API check
startupapicheck:
  enabled: true
  timeout: 1m
  backoffLimit: 4

  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

  podSecurityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
    readOnlyRootFilesystem: true

# Global settings
global:
  # Log level (0-6, higher = more verbose)
  logLevel: 2

  # Leader election namespace
  leaderElection:
    namespace: cert-manager

  # Pod labels
  podLabels: {}

  # Priority class
  priorityClassName: ""

# Extra arguments for cert-manager controller
extraArgs:
  # Enable experimental gateway API support
  # - --feature-gates=ExperimentalGatewayAPISupport=true
  []

# Extra environment variables
extraEnv: []

# Volumes
volumes: []
volumeMounts: []
