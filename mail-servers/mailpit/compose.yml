services:

  #######################################
  # Mailpit: Email testing tool
  #######################################
  mailpit:
    image: axllent/mailpit:latest
    container_name: mailpit
    restart: unless-stopped
    profiles:
      - dev
    volumes:
      - mailpit-data:/data
      # - /etc/localtime:/etc/localtime:ro  # Linux only
    ports:
      - "${MAILPIT_UI_PORT:-8025}:8025"     # Web UI
      - "${MAILPIT_SMTP_PORT:-1025}:1025"   # SMTP
    environment:
      - TZ=${TZ:-UTC}
      - MP_MAX_MESSAGES=${MP_MAX_MESSAGES:-5000}
      - MP_DATABASE=/data/mailpit.db
      - MP_SMTP_AUTH_ACCEPT_ANY=1
      - MP_SMTP_AUTH_ALLOW_INSECURE=1

volumes:
  mailpit-data:
    name: mailpit-data
